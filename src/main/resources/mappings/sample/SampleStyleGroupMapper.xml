<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.base.sbc.module.sample.mapper.SampleStyleGroupMapper">
    <!--
        款式管理-款式搭配
        创建人：lxl
        邮箱：lxl.fml@gmail.com
        创建时间：2023-7-3 14:37:23
        版本号：1.0
      -->

	<select id="getStyleGroupList" resultType="com.base.sbc.module.sample.vo.SampleStyleGroupPageVo">
		SELECT
			t.*,
			t1.sample_design_pic,
			t1.color_name,
			t1.band_code
		FROM
			t_sample_style_group t
			LEFT JOIN t_sample_style_color t1 ON t.style_no = t1.style_no
		WHERE 
			t.company_code = #{companyCode}
			and t.del_flag = '0'
			<if test="groupCode != null and groupCode != ''">
				and t.group_code like "%"#{groupCode}"%"
			</if>
			<if test="groupName != null and groupName != ''">
				and t.group_name like "%"#{groupName}"%"
			</if>
			<if test="styleNo != null and styleNo != ''">
				and t.style_no like "%"#{styleNo}"%"
			</if>
			<if test="remarks != null and remarks != ''">
				and t.remarks like "%"#{remarks}"%"
			</if>
	</select>
	
	
	<select id="getStyleGroupItemByGroupCode" resultType="com.base.sbc.module.sample.vo.SampleStyleGroupPageVo">
		SELECT
			t.id,
			t.company_code,
			t.create_name,
			t.create_date,
			t.update_name,
			t.update_date,
			t2.group_code,
			t2.group_name,
			t1.style_no,
			t1.sample_design_pic,
			t1.color_name,
			t1.band_code 
		FROM
			t_sample_style_group_color t
			LEFT JOIN t_sample_style_group t2 ON t.group_code = t2.group_code
			LEFT JOIN t_sample_style_color t1 ON t.style_no = t1.style_no 
		WHERE
			t.company_code = #{companyCode}
			and t.del_flag = '0'
			and t.group_code = #{groupCode}
	</select>
	
	
	<select id="getSampleStyleGroup" resultType="com.base.sbc.module.sample.vo.SampleStyleGroupPageVo">
		SELECT
			t.*,
			t1.sample_design_pic,
			t1.color_name,
			t1.band_code
		FROM
			t_sample_style_group t
			LEFT JOIN t_sample_style_color t1 ON t.style_no = t1.style_no
		WHERE 
			t.company_code = #{companyCode}
			and t.del_flag = '0'
			and t.id = #{id}
	</select>
	
	

</mapper>